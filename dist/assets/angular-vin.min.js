!function(a,b){function c(){function a(a){if(!a)return{valid:!1,error:"VIN cannot be empty",errCode:"emptyvin"};if(a.length!==c)return{valid:!1,error:"VIN must be "+c+" characters",errCode:"invalidlength"};if(a=a.toUpperCase(),!new RegExp(f,"g").test(a))return{valid:!1,error:"VIN must be alphanumeric and cannot contain  any of the following: "+e.split("").join(", "),errCode:"invalidchars"};var b,i=a.split(""),j=0;for(b=0;c>b;++b)b!==d&&(j+=isNaN(i[b])?g[i[b]]*h[b]:i[b]*h[b]);var k=j%11;return 10===k&&(k="X"),k!=i[d]?{valid:!1,error:"VIN is invalid",errCode:"invalidcheckdigit"}:{valid:!0}}var b={},c=b.vinLength=17,d=b.checkDigitIndex=8,e=b.invalidChars="OQI",f=b.regEx="[A-HJ-NPR-Z0-9]{17}",g=(b.replaceRegEx="[^A-HJ-NPR-Z0-9]",b.characterMap={A:1,B:2,C:3,D:4,E:5,F:6,G:7,H:8,J:1,K:2,L:3,M:4,N:5,P:7,R:9,S:2,T:3,U:4,V:5,W:6,X:7,Y:8,Z:9}),h=b.weights=[8,7,6,5,4,3,2,10,null,9,8,7,6,5,4,3,2];return b.validate=a,b}function d(a){function b(b,c,d,e){function f(b){if(!b)return b;var c=new RegExp(a.replaceRegEx,"g"),d=b.replace(c,"");return d!==b&&(e.$setViewValue(d),e.$render()),d}function g(a){if(a){var b=a.toUpperCase();return b!==a&&(e.$setViewValue(b),e.$render()),b}return a}function h(c){if(e.$setValidity("invalidlength",!0),e.$setValidity("invalidchars",!0),e.$setValidity("invalidcheckdigit",!0),!c)return c;var d=a.validate(c);return d.valid?(e.$setPristine(),b.vinIsValid&&b.vinIsValid(c),c):(e.$setValidity(d.errCode,!1),c)}c.attr("maxlength",a.vinLength),e.$parsers.unshift(h),e.$parsers.unshift(f),e.$parsers.unshift(g)}return{scope:{ngModel:"=ngModel",vinIsValid:"=vinIsValid"},restrict:"A",require:"ngModel",link:b}}b.module("angular-vin",[]),b.module("angular-vin").factory("vinValidatorService",c),b.module("angular-vin").directive("vinInput",d)}(window,angular);